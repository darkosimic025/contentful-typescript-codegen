{"code":"import { __assign, __awaiter, __generator } from \"tslib\";\r\nimport { format, resolveConfig } from \"prettier\";\r\nimport renderAllLocales from \"./contentful/renderAllLocales\";\r\nimport renderContentfulImports from \"./contentful/renderContentfulImports\";\r\nimport renderContentType from \"./contentful/renderContentType\";\r\nimport renderContentTypeId from \"./contentful/renderContentTypeId\";\r\nimport renderDefaultLocale from \"./contentful/renderDefaultLocale\";\r\nimport renderLocalizedTypes from \"./contentful/renderLocalizedTypes\";\r\nimport renderNamespace from \"./contentful/renderNamespace\";\r\nimport renderUnion from \"./typescript/renderUnion\";\r\nexport default function render(contentTypes, locales, _a) {\r\n    var _b = _a === void 0 ? {} : _a, namespace = _b.namespace, _c = _b.localization, localization = _c === void 0 ? false : _c;\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var sortedContentTypes, sortedLocales, typingsSource, source, prettierConfig;\r\n        return __generator(this, function (_d) {\r\n            switch (_d.label) {\r\n                case 0:\r\n                    sortedContentTypes = contentTypes.sort(function (a, b) { return a.sys.id.localeCompare(b.sys.id); });\r\n                    sortedLocales = locales.sort(function (a, b) { return a.code.localeCompare(b.code); });\r\n                    typingsSource = [\r\n                        renderAllContentTypes(sortedContentTypes, localization),\r\n                        renderAllContentTypeIds(sortedContentTypes),\r\n                        renderEntryType(sortedContentTypes),\r\n                        renderAllLocales(sortedLocales),\r\n                        renderDefaultLocale(sortedLocales),\r\n                        renderLocalizedTypes(localization),\r\n                    ].join(\"\\n\\n\");\r\n                    source = [\r\n                        renderContentfulImports(localization, hasRichText(contentTypes)),\r\n                        renderNamespace(typingsSource, namespace),\r\n                    ].join(\"\\n\\n\");\r\n                    return [4 /*yield*/, resolveConfig(process.cwd())];\r\n                case 1:\r\n                    prettierConfig = _d.sent();\r\n                    return [2 /*return*/, format(source, __assign(__assign({}, prettierConfig), { parser: \"typescript\" }))];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction renderAllContentTypes(contentTypes, localization) {\r\n    return contentTypes.map(function (contentType) { return renderContentType(contentType, localization); }).join(\"\\n\\n\");\r\n}\r\nfunction renderAllContentTypeIds(contentTypes) {\r\n    return renderUnion(\"CONTENT_TYPE\", contentTypes.map(function (contentType) { return \"'\" + contentType.sys.id + \"'\"; }));\r\n}\r\nfunction renderEntryType(contentTypes) {\r\n    return renderUnion(\"IEntry\", contentTypes.map(function (contentType) { return renderContentTypeId(contentType.sys.id); }));\r\n}\r\nfunction hasRichText(contentTypes) {\r\n    return contentTypes.some(function (sortedContentType) {\r\n        return sortedContentType.fields.some(function (f) { return !f.omitted && f.type === \"RichText\"; });\r\n    });\r\n}\r\n//# sourceMappingURL=render.js.map","references":["/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/node_modules/contentful/index.d.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/node_modules/@types/prettier/index.d.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderAllLocales.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderContentfulImports.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderContentType.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderContentTypeId.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderDefaultLocale.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderLocalizedTypes.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/contentful/renderNamespace.ts","/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/src/renderers/typescript/renderUnion.ts"],"map":"{\"version\":3,\"file\":\"render.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/renderers/render.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/darkosimic/Documents/Workshop_1/contentful-typescript-codegen/dist/types/renderers/render.d.ts","writeByteOrderMark":false,"text":"import { ContentType, Locale } from \"contentful\";\r\ninterface Options {\r\n    localization?: boolean;\r\n    namespace?: string;\r\n}\r\nexport default function render(contentTypes: ContentType[], locales: Locale[], { namespace, localization }?: Options): Promise<string>;\r\nexport {};\r\n"}}
